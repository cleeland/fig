#!/usr/bin/env ruby

$LOAD_PATH << File.expand_path(File.join(File.dirname(__FILE__), %w< .. lib > ))

require 'rubygems'

require 'fig'

include Fig

def run
  begin
    return_code = run_fig
    return return_code
  rescue URLAccessError => exception
    $stderr.puts "Access to #{exception.url} not allowed."
    return 1
  rescue UserInputError => exception
    # If there's no message, we assume that the cause has already been logged.
    if not exception.message.nil?
      $stderr.puts exception.to_s
    end

    return 1
  end
end

return_code = run
exit return_code
